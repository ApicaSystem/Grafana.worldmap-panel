{"version":3,"sources":["../src/map_renderer.js"],"names":["link","scope","elem","attrs","ctrl","events","on","render","renderingCompleted","data","mapContainer","find","id","indexOf","setTimeout","map","WorldMap","resize","mapCenterMoved","panToMapCenter","legend","panel","showLegend","createLegend","drawCircles"],"mappings":";;;;;;AAGe,WAASA,IAAT,CAAcC,KAAd,EAAqBC,IAArB,EAA2BC,KAA3B,EAAkCC,IAAlC,EAAwC;AACrDA,SAAKC,MAAL,CAAYC,EAAZ,CAAe,QAAf,EAAyB,YAAM;AAC7BC;AACAH,WAAKI,kBAAL;AACD,KAHD;;AAKA,aAASD,MAAT,GAAkB;AAChB,UAAI,CAACH,KAAKK,IAAV,EAAgB;;AAEhB,UAAMC,eAAeR,KAAKS,IAAL,CAAU,eAAV,CAArB;;AAEA,UAAID,aAAa,CAAb,EAAgBE,EAAhB,CAAmBC,OAAnB,CAA2B,IAA3B,IAAmC,CAAC,CAAxC,EAA2C;AACzC;AACD;;AAEDC,iBAAW,YAAM;AACb,YAAI,CAACV,KAAKW,GAAV,EAAe;AACbX,eAAKW,GAAL,GAAW,IAAIC,QAAJ,CAAaZ,IAAb,EAAmBM,aAAa,CAAb,CAAnB,CAAX;AACD;;AAEDN,aAAKW,GAAL,CAASE,MAAT;;AAEA,YAAIb,KAAKc,cAAT,EAAyBd,KAAKW,GAAL,CAASI,cAAT;;AAEzB,YAAI,CAACf,KAAKW,GAAL,CAASK,MAAV,IAAoBhB,KAAKiB,KAAL,CAAWC,UAAnC,EAA+ClB,KAAKW,GAAL,CAASQ,YAAT;;AAE/CnB,aAAKW,GAAL,CAASS,WAAT;AACH,OAZD,EAYG,GAZH;AAaD;AACF;;qBA7BuBxB,I;;;;AAFjBgB,c","file":"map_renderer.js","sourcesContent":["import './css/leaflet.css!';\r\nimport WorldMap from './worldmap_apica';\r\n\r\nexport default function link(scope, elem, attrs, ctrl) {\r\n  ctrl.events.on('render', () => {\r\n    render();\r\n    ctrl.renderingCompleted();\r\n  });\r\n\r\n  function render() {\r\n    if (!ctrl.data) return;\r\n\r\n    const mapContainer = elem.find('.mapcontainer');\r\n\r\n    if (mapContainer[0].id.indexOf('{{') > -1) {\r\n      return;\r\n    }\r\n\r\n    setTimeout(() => {\r\n        if (!ctrl.map) {\r\n          ctrl.map = new WorldMap(ctrl, mapContainer[0]);\r\n        }\r\n\r\n        ctrl.map.resize();\r\n\r\n        if (ctrl.mapCenterMoved) ctrl.map.panToMapCenter();\r\n\r\n        if (!ctrl.map.legend && ctrl.panel.showLegend) ctrl.map.createLegend();\r\n\r\n        ctrl.map.drawCircles();\r\n    }, 100);\r\n  }\r\n}\r\n"]}